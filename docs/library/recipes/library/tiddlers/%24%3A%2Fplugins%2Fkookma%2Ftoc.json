{"title":"$:/plugins/kookma/toc","description":"TOC: Table of contents and hierarchical navigation","author":"Mohammad Rahmani","version":"1.3.0","core-version":">=5.1.21","source":"https://github.com/kookma/TW-TOC","list":"readme history license","dependents":"","plugin-type":"plugin","type":"application/json","text":"{\n    \"tiddlers\": {\n        \"$:/plugins/kookma/toc/history\": {\n            \"title\": \"$:/plugins/kookma/toc/history\",\n            \"created\": \"20200220093235978\",\n            \"modified\": \"20200313203750327\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"!! Revision 1.3.0\\n* date:[13th Mar 2020]\\n* [NEW] global variable `adminTid` is added to allow adminstration rules. If set to `reader` will hide the `switch to author mode` \\n\\n!! Revision 1.2.0\\n* date:[11th Mar 2020]\\n* [FIXED] issue in font weight of opened-item\\n* [FIXED] color of navigation button removed\\n* [NEW] opened entry has a left solid bar\\n\\n!! Revision 1.1.0\\n* date:[28th Feb 2020]\\n* [NEW] `toc-ui` macro\\n* [NEW] outliner (drag and drop to re arrange entries)\\n* [NEW] bookmarks\\n* [NEW] improved documentation\\n\\n!! Revision 1.0.0\\n* Date: [21st Feb 2020]\\n* [NEW] documentation improved\\n* [NEW] code polished\\n* [NEW] common macros and styles mereged\\n\\n!! Revision 0.5.0\\n* Date: [14 Feb 2020]\\n* [NEW] documentation improved\\n* [NEW] examples added\\n* [NEW] outline numbered class is added\\n\\n!! Revision 0.1.0\\n* Date: [23rd Jan 2020]\\n* first release\"\n        },\n        \"$:/plugins/kookma/toc/license\": {\n            \"title\": \"$:/plugins/kookma/toc/license\",\n            \"created\": \"20200220093235979\",\n            \"modified\": \"20200227232831721\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"Distributed under an MIT license.\\n\\nCopyright (c) 2020 [[Mohammad Rahmani|https://github.com/kookma]]\\n\\n<<<\\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \\\"Software\\\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\\n<<<\\n\"\n        },\n        \"$:/plugins/kookma/toc/macros/helper\": {\n            \"title\": \"$:/plugins/kookma/toc/macros/helper\",\n            \"created\": \"20200220082105852\",\n            \"modified\": \"20200227232831717\",\n            \"tags\": \"$:/tags/Macro/Toc\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define tidSelectedItem() $:/temp/toc/selected-item/$(stateTiddler)$\\n\\\\define tidToggleState()  $:/temp/toc/toggle/$(stateTiddler)$\\n\\n\\\\define tidShowMode()  $:/temp/toc/show-mode/$(stateTiddler)$\\n\\\\define tidExpandAll() $:/temp/toc/expand-all//$(stateTiddler)$\\n\\\\define tidShowTools() $:/temp/toc/show-tools/$(stateTiddler)$\\n\\n\\\\define tidTocTemplate()    $:/plugins/kookma/toc/templates/show-single-item\\n\\\\define tidBookmarkConfig() $:/config/toc/bookmarks/$(stateTiddler)$\"\n        },\n        \"$:/plugins/kookma/toc/macros/multilevel-draggable\": {\n            \"title\": \"$:/plugins/kookma/toc/macros/multilevel-draggable\",\n            \"created\": \"20200225205504695\",\n            \"modified\": \"20200227232831713\",\n            \"tags\": \"$:/tags/Macro/Toc\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define toc-item-dragdata()      $:/temp/toc/dragdata\\n\\\\define toc-item-dragdata-path() $:/temp/toc/dragdata/path\\n\\\\define toc-item-dragstart()   \\n<$action-setfield  $tiddler=<<toc-item-dragdata>> text=<<actionTiddler>> />\\n<$action-setfield  $tiddler=<<toc-item-dragdata-path>> text=<<path>> />\\n\\\\end\\n\\\\define toc-item-dragend()  \\n<$action-deletetiddler $tiddler=<<toc-item-dragdata>> />\\n<$action-deletetiddler $tiddler=<<toc-item-dragdata-path>> />\\n\\\\end\\n\\n\\\\define toc_caption()\\n<$transclude field=\\\"caption\\\">\\n   <$view field=\\\"title\\\"/>\\n</$transclude>\\n\\\\end\\n\\n\\\\define toc-item-dragtip()\\n<$wikify name=actionTiddler text={{{ [<toc-item-dragdata>get[text]] }}}><!--handles title with space in title-->\\n<$vars actionTiddlerx={{{ [<toc-item-dragdata>get[text]] }}}>\\n<$list filter=\\\"[<actionTiddler>!match<item>]\\\"> <!-- DON'T SHOW TIP ON SELF -->\\n   <div class=\\\"kk-toc-dragtip\\\">\\n      <nobr>drop <$tiddler tiddler=<<actionTiddler>>>''<<toc_caption>>''</$tiddler></nobr><br>\\n      <nobr>onto <$tiddler tiddler=<<item>>         >''<<toc_caption>>''</$tiddler></nobr><br>\\n      <div style=\\\"font-size:80%; border-top:1px solid; margin-top:0.2em;\\\">\\n         NO KEY=insert before, SHIFT=insert after, CTRL=drop into\\n      </div>\\n   </div>\\n</$list>\\n</$vars>\\n</$wikify>\\n\\\\end\\n\\n\\n\\\\define toc-item-drop()\\n<$reveal default=<<actionTiddler>> type=\\\"nomatch\\\" text=<<item>>> <!-- DON'T DROP ON SELF -->\\n   <!-- get OLDTAG and NEWTAG, exclude special TiddlyBook tags -->\\n   <$vars sourcepath={{{ [<toc-item-dragdata-path>get[text]] }}}\\n          targetpath=<<path>> >\\n   <$vars oldtag= {{{ [<sourcepath>split[/]]-[<actionTiddler>]+[last[]]  }}}\\n           newtag={{{ [<targetpath>split[/]]-[<item>]+[last[]]  }}}>\\n   <$reveal default=<<modifier>> type=\\\"match\\\" text=\\\"normal\\\"> <!-- DROP BEFORE SIBLING -->\\n      <$set name=\\\"order\\\" filter=\\\"[<newtag>tagging[]]\\\">\\n      <$list filter=<<order>>> <$action-deletefield $field=\\\"list-before\\\"/> <$action-deletefield $field=\\\"list-after\\\"/> </$list>\\n      <$action-listops $tiddler=<<actionTiddler>> $field=\\\"tags\\\" $subfilter=\\\"-[<oldtag>] [<newtag>]\\\" />\\n      <$action-listops $tiddler=<<oldtag>>        $field=\\\"list\\\" $subfilter=\\\"-[<actionTiddler>]\\\" />\\n      <$action-listops $tiddler=<<newtag>>        $field=\\\"list\\\" $subfilter=\\\"[enlist<order>] -[<actionTiddler>] [<actionTiddler>] +[putbefore<item>]\\\" />\\n      </$set>\\n   </$reveal>\\n   <$reveal default=<<modifier>> type=\\\"match\\\" text=\\\"shift\\\"> <!-- DROP AFTER SIBLING -->\\n      <$set name=\\\"order\\\" filter=\\\"[<newtag>tagging[]]\\\">\\n      <$list filter=<<order>>> <$action-deletefield $field=\\\"list-before\\\"/> <$action-deletefield $field=\\\"list-after\\\"/> </$list>\\n      <$action-listops $tiddler=<<actionTiddler>> $field=\\\"tags\\\" $subfilter=\\\"-[<oldtag>] [<newtag>]\\\" />\\n      <$action-listops $tiddler=<<oldtag>>        $field=\\\"list\\\" $subfilter=\\\"-[<actionTiddler>]\\\" />\\n      <$action-listops $tiddler=<<newtag>>        $field=\\\"list\\\" $subfilter=\\\"[enlist<order>] -[<actionTiddler>] [<actionTiddler>] +[putafter<item>]\\\" />\\n      </$set>\\n   </$reveal>\\n   <$reveal default=<<modifier>> type=\\\"match\\\" text=\\\"ctrl\\\"> <!-- DROP AS CHILD -->\\n      <$set name=\\\"order\\\" filter=\\\"[<item>tagging[]]\\\">\\n      <$list filter=<<order>>> <$action-deletefield $field=\\\"list-before\\\"/> <$action-deletefield $field=\\\"list-after\\\"/> </$list>\\n      <$action-listops $tiddler=<<actionTiddler>> $field=\\\"tags\\\" $subfilter=\\\"-[<oldtag>] [<item>]\\\" />\\n      <$action-listops $tiddler=<<oldtag>>        $field=\\\"list\\\" $subfilter=\\\"-[<actionTiddler>]\\\" />\\n      <$action-listops $tiddler=<<item>>          $field=\\\"list\\\" $subfilter=\\\"[enlist<order>] -[<actionTiddler>] [<actionTiddler>]\\\" />\\n      </$set>\\n   </$reveal>\\n   </$vars>\\n   </$vars>\\n</$reveal>\\n\\\\end\"\n        },\n        \"$:/plugins/kookma/toc/macros/multilevel-exapndable\": {\n            \"title\": \"$:/plugins/kookma/toc/macros/multilevel-exapndable\",\n            \"created\": \"20200129100032272\",\n            \"modified\": \"20200227232831709\",\n            \"tags\": \"$:/tags/Macro/Toc\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define toc-show-item-authormode(item, is-branch:no)\\n<$vars item=<<__item__>> is-branch=<<__is-branch__>> >\\n<$droppable actions=<<toc-item-drop>>>\\n\\t<div class=\\\"tc-droppable-placeholder kk-toc-placeholder\\\"></div> \\n\\t<$draggable tiddler=<<item>> startactions=<<toc-item-dragstart>> endactions=<<toc-item-dragend>> dragimagetype=\\\"blank\\\">\\n\\t{{$item$||$(tidTocTemplate)$}}\\n\\t</$draggable>\\n\\t<div class=\\\"tc-droppable-placeholder kk-toc-placeholder\\\"><<toc-item-dragtip>></div> \\n</$droppable>\\n</$vars>\\n\\\\end\\n\\n\\\\define toc-show-item-readermode(item, is-branch:no)\\n<$vars item=<<__item__>> is-branch=<<__is-branch__>> >\\n    {{$item$||$(tidTocTemplate)$}}\\n</$vars>\\n\\\\end\\n\\n\\n\\\\define toggle-branch()\\n<$reveal type=\\\"nomatch\\\" stateTitle=<<tidToggleState>> stateIndex=<<path>> text=\\\"yes\\\">\\n  <$button class=\\\"tc-btn-invisible\\\" setTitle=<<tidToggleState>> setIndex=<<path>> setTo=\\\"yes\\\">\\n   {{$:/core/images/right-arrow}}\\n  </$button>\\n </$reveal>\\n <$reveal type=\\\"match\\\" stateTitle=<<tidToggleState>> stateIndex=<<path>> text=\\\"yes\\\">\\n  <$button class=\\\"tc-btn-invisible\\\" setTitle=<<tidToggleState>> setIndex=<<path>> >\\n   {{$:/core/images/down-arrow}}\\n  </$button>\\n </$reveal>\\n\\\\end \\n\\n\\n\\\\define _toc-tree-body(here, exclude, path)\\n<$vars path=\\\"\\\"\\\"$path$/$here$\\\"\\\"\\\">\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$ +[limit[1]]\\\"\\\"\\\" emptyMessage=\\\"\\\"\\\"<li style=\\\"padding-left:1.2em\\\"><$macrocall $name=<<toc-show-mode>> item=<<__here__>> /></li>\\\"\\\"\\\" variable=ignore>\\n <li><$macrocall $name=<<toc-show-mode>>  item=<<__here__>> is-branch=\\\"yes\\\"/></li>\\n <$reveal type=\\\"match\\\" stateTitle=<<tidToggleState>> stateIndex=<<path>> text=\\\"yes\\\">\\n <ol>\\n   <$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$\\\"\\\"\\\">\\n     <$macrocall $name=\\\"_toc-tree-body\\\" here=<<currentTiddler>> exclude=\\\"\\\"\\\"$exclude$ -[[$here$]]\\\"\\\"\\\" path=<<path>>/>\\n   </$list>\\n </ol>\\n </$reveal>\\n</$list> \\n</$vars>\\n\\\\end\\n\\n\\n\\\\define toc-tree(here, exclude, mode)\\n<$set name=toc-show-mode value=<<__mode__>> emptyValue=\\\"toc-show-item-readermode\\\">\\n<div class=\\\"kk-toc\\\" style=\\\"margin-top:-10px;\\\">\\n<ol>\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$ -[[$here$]]\\\"\\\"\\\">\\n<$macrocall $name=\\\"_toc-tree-body\\\" here=<<currentTiddler>> exclude=\\\"\\\"\\\"$exclude$ -[[$here$]]\\\"\\\"\\\" path=\\\"\\\"\\\"$here$\\\"\\\"\\\" />\\n</$list>\\n</ol>\\n</div>\\n</$set>\\n\\\\end\\n\\n\\\\define item-path() $(path)$/$(item)$\\n\\n\\\\define _toc-expand(here, exclude, path)\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$ -[[$here$]]\\\"\\\"\\\">\\n<$vars item=<<currentTiddler>> path=\\\"\\\"\\\"$path$\\\"\\\"\\\" >\\n   <$action-setfield $tiddler=<<tidToggleState>>  $index=\\\"\\\"\\\"$path$\\\"\\\"\\\" $value=\\\"yes\\\"/>\\n   <$macrocall $name=\\\"_toc-expand\\\" here=<<item>> exclude=\\\"\\\"\\\"$exclude$ -[[$here$]]\\\"\\\"\\\" path=<<item-path>>/>\\n</$vars>\\t \\n</$list>\\n\\\\end\\n\\n\\n\\\\define collapse-expand-all(here, exclude)\\n<$reveal type=\\\"match\\\" stateTitle=<<tidExpandAll>> stateField=\\\"text\\\" text=\\\"expand-all\\\">\\n<$button class=\\\"tc-btn-invisible kk-toc-btn\\\" tooltip=\\\"collapse all\\\">{{$:/core/images/fold-button}}\\n<$action-deletetiddler $tiddler=<<tidToggleState>> />\\n<$action-setfield $tiddler=<<tidExpandAll>>  text=\\\"collapse-all\\\"/>\\n</$button>\\n</$reveal>\\n<$reveal type=\\\"nomatch\\\" stateTitle=<<tidExpandAll>> stateField=\\\"text\\\" text=\\\"expand-all\\\">\\n<$button class=\\\"tc-btn-invisible kk-toc-btn\\\" tooltip=\\\"expand all\\\">{{$:/core/images/unfold-button}}\\n<$macrocall $name=\\\"_toc-expand\\\" here=<<__here__>> exclude=<<__exclude__>> path=<<__here__>> />\\n<$action-setfield $tiddler=<<tidExpandAll>>  text=\\\"expand-all\\\"/>\\n</$button>\\n</$reveal>\\n\\\\end\\n\\n\\\\define multilevel-toc-expandable(tag:\\\"TableOfContents\\\", exclude:\\\"\\\", stateTiddler:\\\"multilevelState\\\")\\n<$set name=stateTiddler value=<<__stateTiddler__>> >\\n<$macrocall $name=collapse-expand-all  here=<<__tag__>> exclude=<<__exclude__>>  />\\n<$macrocall $name=toc-tree here=<<__tag__>> exclude=<<__exclude__>> mode=\\\"toc-show-item-readermode\\\" />\\n</$set>\\n\\\\end\"\n        },\n        \"$:/plugins/kookma/toc/macros/multilevel-navigation\": {\n            \"title\": \"$:/plugins/kookma/toc/macros/multilevel-navigation\",\n            \"created\": \"20200126065458722\",\n            \"modified\": \"20200227232831705\",\n            \"tags\": \"$:/tags/Macro/Toc\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define toc-list(here,exclude)\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$ -[[$here$]]\\\"\\\"\\\">\\n   <$text text=\\\"[[\\\"/><<currentTiddler>><$text text=\\\"]]\\\"/>\\n   <$macrocall $name=\\\"toc-list\\\" here=<<currentTiddler>> exclude=\\\"\\\"\\\"$exclude$ -[[$here$]]\\\"\\\"\\\"/>\\n</$list>\\n\\\\end\\n\\n\\\\define toc-hierarchical-navigation(tag:\\\"\\\", class, close:\\\"no\\\")\\n<$wikify name=\\\"all\\\" text=\\\"\\\"\\\"<$macrocall $name=\\\"toc-list\\\" here=<<__tag__>> />\\\"\\\"\\\">\\n<$vars  prev={{{ [enlist<all>before<currentTiddler>] }}} >\\n<$vars  next={{{ [enlist<all>after<currentTiddler>]  }}}  >\\n<div class=\\\"$class$\\\">\\n<$list filter=\\\"[<prev>!is[missing]]\\\" variable=\\\"prevTiddler\\\">\\n<$button to=<<prevTiddler>> tooltip=<<prevTiddler>> class=\\\"tc-btn-invisible $class$\\\">previous\\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<prevTiddler>> />  \\n<$list filter=\\\"[<__close__>match[yes]]\\\" variable=ignore><$action-sendmessage $message=\\\"tm-close-tiddler\\\" $param=<<currentTiddler>>/></$list>\\n</$button>\\n</$list>\\n<$list filter=\\\"[<next>!is[missing]] [<prev>!is[missing]] +[count[]] -1 -0\\\" variable=ignore>|</$list>\\n<$list filter=\\\"[<next>!is[missing]]\\\" variable=\\\"nextTiddler\\\">\\n<$button to=<<nextTiddler>> tooltip=<<nextTiddler>> class=\\\"tc-btn-invisible $class$\\\">next\\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<nextTiddler>> />  \\n<$list filter=\\\"[<__close__>match[yes]]\\\" variable=ignore><$action-sendmessage $message=\\\"tm-close-tiddler\\\" $param=<<currentTiddler>>/></$list>\\n</$button>\\n</$list>\\n</div>\\n</$vars>\\n</$vars>\\n</$wikify>\\n\\\\end\\n\\n\\n\\\\define multilevel-toc-navigation(tag:\\\"TableOfContents\\\", close:\\\"no\\\", class:\\\"\\\", stateTiddler:\\\"multilevelState\\\")\\n<$set name=stateTiddler value=<<__stateTiddler__>> >\\n<$list filter=\\\"[<currentTiddler>!is[system]]\\\">\\n   <div class=\\\"kk-toc-hideForPrint\\\">\\n     <$macrocall $name=\\\"toc-hierarchical-navigation\\\"\\n       tag=\\\"\\\"\\\"$tag$\\\"\\\"\\\" close=<<__close__>> class=<<__class__>> />\\n   </div>\\n</$list>\\n</$set>\\n\\\\end\"\n        },\n        \"$:/plugins/kookma/toc/macros/multilevel-toc-all\": {\n            \"title\": \"$:/plugins/kookma/toc/macros/multilevel-toc-all\",\n            \"created\": \"20200227180558214\",\n            \"modified\": \"20200313201450721\",\n            \"tags\": \"$:/tags/Macro/Toc\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define toc-all-body(here,exclude)\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$ -[[$here$]]\\\"\\\"\\\">\\n  <li><$link/></li>\\n  <$list filter=\\\"[tag<currentTiddler>]+[limit[1]]\\\" variable=ignore>\\n    <ol style=\\\"padding-left:1.5em\\\">\\n      <$macrocall $name=\\\"toc-all-body\\\" here=<<currentTiddler>> exclude=\\\"\\\"\\\"$exclude$ -[[$here$]]\\\"\\\"\\\"/>\\n    </ol>\\n</$list>\\n</$list>\\n\\\\end\\n\\n\\\\define toc-all(tag, exclude)\\n<div class=\\\"kk-toc\\\">\\n  <ol>\\n    <$macrocall $name=\\\"toc-all-body\\\" here=<<__tag__>> exclude=<<__exclude__>> />\\n  </ol>\\n</div>\\n\\\\end\"\n        },\n        \"$:/plugins/kookma/toc/macros/multilevel-ui\": {\n            \"title\": \"$:/plugins/kookma/toc/macros/multilevel-ui\",\n            \"created\": \"20200226221456462\",\n            \"modified\": \"20200313200405874\",\n            \"tags\": \"$:/tags/Macro/Toc\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define show-mode()\\n<$reveal type=\\\"nomatch\\\" stateTitle=<<tidShowMode>> stateField=\\\"text\\\" text=\\\"toc-show-item-authormode\\\">\\n<$button class=\\\"tc-btn-invisible kk-toc-btn\\\" tooltip=\\\"switch to author mode\\\">{{$:/core/images/edit-button}}\\n<$action-setfield $tiddler=<<tidShowMode>>  text=\\\"toc-show-item-authormode\\\"/>\\n</$button>\\n</$reveal>\\n<$reveal type=\\\"match\\\" stateTitle=<<tidShowMode>> stateField=\\\"text\\\" text=\\\"toc-show-item-authormode\\\">\\n<$button class=\\\"tc-btn-invisible kk-toc-btn\\\" tooltip=\\\"switch to reader mode\\\">{{$:/core/images/done-button}}\\n<$action-setfield $tiddler=<<tidShowMode>>  text=\\\"toc-show-item-readermode\\\"/>\\n</$button>\\n</$reveal>\\n\\\\end\\n\\n\\\\define remove-all-bookmarks()\\n<$button class=\\\"tc-btn-invisible kk-toc-btn\\\" tooltip=\\\"remove all bookmarks\\\">&#x2606;\\n<$list filter=\\\"[<tidBookmarkConfig>!is[missing]]\\\" variable=ignore>\\n<$action-deletetiddler $tiddler=<<tidBookmarkConfig>> />\\n</$list>\\n</$button>\\n\\\\end\\n\\n\\\\define toggle-display-btnTools()\\n<$list filter=\\\"[<tidShowTools>get[text]match[show]]\\\"\\n emptyMessage=\\\"\\\"\\\"<$action-setfield $tiddler=<<tidShowTools>> text=\\\"show\\\"/>\\\"\\\"\\\">\\n<$action-setfield $tiddler=<<tidShowTools>> text=\\\"hide\\\"/>\\n</$list>\\n\\\\end\\n\\n\\\\define toc-manager-ui()\\n<span class=\\\"kk-toc-tools-manager\\\"> --- &nbsp;\\n<$button class=\\\"tc-btn-invisible kk-toc-btn\\\" tooltip=\\\"toggle tools buttons\\\" actions=<<toggle-display-btnTools>>>\\n{{$:/core/images/options-button}}\\n</$button>\\n<$reveal stateTitle=<<tidShowTools>> stateField=text text=\\\"show\\\" type=\\\"match\\\">\\n<$macrocall $name=\\\"collapse-expand-all\\\" here=<<__tag__>> exclude=<<__exclude__>> />\\n<$reveal type=nomatch stateTitle=<<adminTid>> stateField=\\\"text\\\" text=\\\"reader\\\" default=\\\"author\\\">\\n<<show-mode>><!--only hide edit tools if adminTid tiddler text is reader-->\\n</$reveal>\\n<<remove-all-bookmarks>>\\n</$reveal>\\n</span>\\n\\\\end\\n\\n\\\\define toc-ui(tag:\\\"TableOfContents\\\", exclude:\\\"\\\", stateTiddler:\\\"multilevelState\\\")\\n<$set name=stateTiddler value=<<__stateTiddler__>> >\\n<<toc-manager-ui>>\\n<$macrocall $name=toc-tree here=<<__tag__>> exclude=<<__exclude__>> mode={{{[<tidShowMode>get[text]]}}} />\\n</$set>\\n\\\\end\\n\\n\"\n        },\n        \"$:/plugins/kookma/toc/macros/twolevel-expandable\": {\n            \"title\": \"$:/plugins/kookma/toc/macros/twolevel-expandable\",\n            \"created\": \"20200129073852901\",\n            \"modified\": \"20200227232831693\",\n            \"tags\": \"$:/tags/Macro/Toc\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define twolevel-toc-show-single-item(item)\\n<$set name=\\\"openItemClass\\\" filter=\\\"[<tidSelectedItem>get[text]match<__item__>]\\\" value=\\\"tc-btn-invisible kk-toc-opened-item\\\" emptyValue=\\\"tc-btn-invisible tc-tiddlylink\\\">\\n<$button class=<<openItemClass>> style=\\\"outline:none;\\\" to=<<__item__>> dragTiddler=<<__item__>>>\\n  <$view tiddler=<<__item__>> field=\\\"caption\\\">\\n    <$view tiddler=<<__item__>> field=\\\"title\\\"></$view>\\n  </$view>\\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<__item__>> />    \\n</$button>\\n</$set>\\n\\\\end \\n\\n\\n\\\\define twolevel-toc-body(here, exclude)\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$ +[limit[1]]\\\"\\\"\\\" emptyMessage=\\\"\\\"\\\"<li class=\\\"kk-toc-item\\\" style=\\\"padding-left:1.2em\\\"><$macrocall $name=twolevel-toc-show-single-item item=<<__here__>> /></li>\\\"\\\"\\\" variable=ignore>\\n<li class=\\\"kk-toc-item\\\">\\n<$reveal type=\\\"nomatch\\\" stateTitle=<<tidToggleState>> stateIndex=<<__here__>> text=\\\"yes\\\">\\n  <$button class=\\\"tc-btn-invisible tc-tiddlylink\\\" style=\\\"outline:none;\\\" setTitle=<<tidToggleState>> setIndex=<<__here__>> setTo=\\\"yes\\\">\\n   {{$:/core/images/right-arrow}}\\n  </$button>\\n </$reveal>\\n <$reveal type=\\\"match\\\" stateTitle=<<tidToggleState>> stateIndex=<<__here__>> text=\\\"yes\\\">\\n  <$button class=\\\"tc-btn-invisible tc-tiddlylink\\\" style=\\\"outline:none;\\\" setTitle=<<tidToggleState>> setIndex=<<__here__>> setTo=\\\"no\\\">\\n   {{$:/core/images/down-arrow}}\\n  </$button>\\n </$reveal>\\n<$macrocall $name=twolevel-toc-show-single-item item=<<__here__>> />\\n</li>\\n<$reveal type=\\\"match\\\" stateTitle=<<tidToggleState>> stateIndex=<<__here__>> text=\\\"yes\\\">\\n<ol>\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$\\\"\\\"\\\">\\n<li class=\\\"kk-toc-item\\\"><$macrocall $name=twolevel-toc-show-single-item item=<<currentTiddler>> /></li>\\n</$list>\\n</ol>\\n</$reveal>\\n\\\\end\\n\\n\\n\\\\define twolevel-toc-tree(here, exclude)\\n<div class=\\\"kk-toc\\\" style=\\\"margin-top:-10px\\\">\\n<ol>\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$\\\"\\\"\\\"> \\n<$macrocall $name=twolevel-toc-body here=<<currentTiddler>> exclude=<<__exclude__>> />\\n</$list>\\n</ol>\\n</div>\\n\\\\end\\n\\n\\n\\\\define twolevel-toc-expand-all(here, exclude)\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$\\\"\\\"\\\"> \\n<$list filter=\\\"[tag<currentTiddler>count[]!match[0]]\\\" variable=ignore>\\n<$action-setfield $tiddler=<<tidToggleState>>  $index=<<currentTiddler>> $value=\\\"yes\\\"/>\\n</$list>\\n</$list>\\n\\\\end\\n\\n\\n\\\\define twolevel-collapse-expand-all(here, exclude)\\n<$reveal type=\\\"match\\\" stateTitle=<<tidExpandAll>> stateField=\\\"text\\\" text=\\\"expand-all\\\">\\n<$button tooltip=\\\"collapse all\\\" class=\\\"tc-btn-invisible kk-toc-btn\\\" style=\\\"outline:none;\\\" tooltip=\\\"collapse all\\\">{{$:/core/images/fold-button}}\\n<$action-deletetiddler $tiddler=<<tidToggleState>> />\\n<$action-setfield $tiddler=<<tidExpandAll>>  text=\\\"collapse-all\\\"/>\\n</$button>\\n</$reveal>\\n<$reveal type=\\\"nomatch\\\" stateTitle=<<tidExpandAll>> stateField=\\\"text\\\" text=\\\"expand-all\\\">\\n<$button tooltip=\\\"expand all\\\" class=\\\"tc-btn-invisible kk-toc-btn\\\" style=\\\"outline:none;\\\">{{$:/core/images/unfold-button}}\\n<$macrocall $name=\\\"twolevel-toc-expand-all\\\" here=<<__here__>> exclude=<<__exclude__>> />\\n<$action-setfield $tiddler=<<tidExpandAll>>  text=\\\"expand-all\\\"/>\\n</$button>\\n</$reveal>\\n\\\\end\\n\\n\\n\\\\define twolevel-toc-expandable(tag:\\\"Contents\\\", exclude:\\\"\\\", stateTiddler:\\\"twolevelState\\\")\\n<$set name=stateTiddler value=<<__stateTiddler__>> >\\n<$macrocall $name=twolevel-collapse-expand-all  here=<<__tag__>> exclude=<<__exclude__>>  />\\n<$macrocall $name=twolevel-toc-tree  here=<<__tag__>> exclude=<<__exclude__>>   />\\n</$set>\\n\\\\end\"\n        },\n        \"$:/plugins/kookma/toc/macros/twolevel-navigation\": {\n            \"title\": \"$:/plugins/kookma/toc/macros/twolevel-navigation\",\n            \"created\": \"20200220082243485\",\n            \"modified\": \"20200227232831689\",\n            \"tags\": \"$:/tags/Macro/Toc\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define twolevel-toc-list(here, exclude)\\n<$list filter=\\\"\\\"\\\"[tag[$here$]] $exclude$\\\"\\\"\\\"> \\n<$text text=\\\"[[\\\"/><<currentTiddler>><$text text=\\\"]]\\\"/>\\n  <$list filter=\\\"\\\"\\\"[tag<currentTiddler>] $exclude$\\\"\\\"\\\">\\n    <$text text=\\\"[[\\\"/><<currentTiddler>><$text text=\\\"]]\\\"/>\\n  </$list>\\n</$list>\\n\\\\end\\n\\n\\\\define twolevel-toc-hierarchical-navigation(tag:\\\"\\\", class, close:\\\"no\\\")\\n<$wikify name=\\\"all\\\" text=\\\"\\\"\\\"<$macrocall $name=\\\"twolevel-toc-list\\\" here=<<__tag__>> />\\\"\\\"\\\">\\n<$vars  prev={{{ [enlist<all>before<currentTiddler>] }}} >\\n<$vars  next={{{ [enlist<all>after<currentTiddler>]  }}}  >\\n<div class=\\\"$class$\\\">\\n<$list filter=\\\"[<prev>!is[missing]]\\\" variable=\\\"prevTiddler\\\">\\n<$button to=<<prevTiddler>> tooltip=<<prevTiddler>> class=\\\"tc-btn-invisible $class$\\\">previous\\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<prevTiddler>> />  \\n<$list filter=\\\"[<__close__>match[yes]]\\\" variable=ignore><$action-sendmessage $message=\\\"tm-close-tiddler\\\" $param=<<currentTiddler>>/></$list>\\n</$button>\\n</$list>\\n<$list filter=\\\"[<next>!is[missing]] [<prev>!is[missing]] +[count[]] -1 -0\\\" variable=ignore>|</$list>\\n<$list filter=\\\"[<next>!is[missing]]\\\" variable=\\\"nextTiddler\\\">\\n<$button to=<<nextTiddler>> tooltip=<<nextTiddler>> class=\\\"tc-btn-invisible $class$\\\">next\\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<nextTiddler>> />  \\n<$list filter=\\\"[<__close__>match[yes]]\\\" variable=ignore><$action-sendmessage $message=\\\"tm-close-tiddler\\\" $param=<<currentTiddler>>/></$list>\\n</$button>\\n</$list>\\n</div>\\n</$vars>\\n</$vars>\\n</$wikify>\\n\\\\end\\n\\n\\\\define twolevel-toc-navigation(tag:\\\"Contents\\\", close:\\\"no\\\", class:\\\"\\\", stateTiddler:\\\"twolevelState\\\")\\n<$set name=stateTiddler value=<<__stateTiddler__>> >\\n<$list filter=\\\"[<currentTiddler>!is[system]]\\\">\\n   <div class=\\\"kk-twolevel-toc-hideForPrint\\\">\\n     <$macrocall $name=twolevel-toc-hierarchical-navigation \\n       tag=\\\"\\\"\\\"$tag$\\\"\\\"\\\" close=<<__close__>> class=<<__class__>> />\\n   </div>\\n</$list>\\n</$set>\\n\\\\end\"\n        },\n        \"$:/plugins/kookma/toc/readme\": {\n            \"title\": \"$:/plugins/kookma/toc/readme\",\n            \"created\": \"20200220093235979\",\n            \"modified\": \"20200227232831684\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"TOC plugin contains several macros, stylesheets and templates to create table of contents and navigator buttons. In contrast to Tiddlywiki core macros, the TOC plugin has many extra features including\\n\\n* non recursive two level toc\\n* hierarchical navigation\\n* exclude feature to exclude a branch or specific entries\\n* track and highlight the TOC entry opened from table of contents or by navigation buttons\\n\\nLike core toc macro, TOC plugin supports also the recursive multi level table of contents, but here, it also support hierarchical navigation.\"\n        },\n        \"$:/plugins/kookma/toc/styles/hierarchical-navigation\": {\n            \"title\": \"$:/plugins/kookma/toc/styles/hierarchical-navigation\",\n            \"created\": \"20200214171655760\",\n            \"modified\": \"20200311070950926\",\n            \"tags\": \"$:/tags/Stylesheet\",\n            \"type\": \"text/css\",\n            \"text\": \".kk-toc-navigation{\\n font-weight: 600;\\n}\\n\\n@media print {\\n .kk-toc-hideForPrint{display:none;}\\n}\\n  \"\n        },\n        \"$:/plugins/kookma/toc/styles/main\": {\n            \"title\": \"$:/plugins/kookma/toc/styles/main\",\n            \"created\": \"20200129072515692\",\n            \"modified\": \"20200311072141280\",\n            \"tags\": \"$:/tags/Stylesheet\",\n            \"type\": \"text/css\",\n            \"text\": \"/* these styles are used to customize the TOC tree and ui */\\n/* toc tree lists */\\n.kk-toc ol {\\n  list-style-type: none;\\n  padding-left:0;\\n}\\n.kk-toc  ol ol{\\n  list-style-type: none;\\n  padding-left:2em;\\n}\\n\\n/* bold first level entry and normal weight for other levels */\\n.kk-toc li    .tc-tiddlylink{font-weight: bold;}\\n.kk-toc ol ol .tc-tiddlylink{font-weight:normal;}\\n\\n\\n.kk-toc-item            { text-align:left; white-space:nowrap; } /* prevent wrapping long entries*/\\n.kk-toc-item img        { height:1em; width:1em; }\\n.kk-toc-item svg        { height:1em; width:1em;}\\n\\n/* More tools button fade-in */\\n.kk-toc-item       .kk-toc-tools        { opacity:0.0; }\\n.kk-toc-item:hover .kk-toc-tools        { opacity:0.5; }\\n.kk-toc-item:hover .kk-toc-tools:hover  { opacity:1.0; }\\n\\n/* bookmark button fade-in*/\\n.kk-toc-item       .kk-bookmark        { opacity:0.0; }\\n.kk-toc-item:hover .kk-bookmark        { opacity:0.5; }\\n.kk-toc-item:hover .kk-bookmark:hover  { opacity:1.0; }\\n.kk-toc-item       .kk-bookmark.show   { opacity:1.0 !important; }\\n\\n/*  drag and drop elements */\\n.kk-toc-placeholder{ position:relative; border:0 !important; border-bottom:1px dotted blue !important; }\\n.kk-toc-dragtip    {\\n   position:absolute; z-index:1; right:0.5em; top:0.5em; padding:0.25em 0.5em;\\n   border:1px solid lightgray; box-shadow: 0.3em 0.3em 0.5em rgba(0,0,0,0.3);\\n   background:white; text-align:center; font-size:80%; line-height:100%;\\n}\\n\\n\\n/* set color of links when toc is used in a sidebar tab*/\\n.tc-sidebar-lists .kk-toc-item .tc-tiddlylink{color:#999999}\\n.tc-sidebar-lists .kk-toc-item svg        { height:1em; width:1em; fill: #acacac;}\\n\\n/* item when are visited NOT in sidebar*/\\n/*.kk-toc li  .tc-tiddlylink{color:black;}  selected or clicked item */\\n.kk-toc-opened-item{ \\n\\tpadding:0;\\n\\tpadding-left:5px; \\n\\tborder-radius: unset;\\n\\tborder-left-width:2px; \\n\\tborder-left-style:solid;}\\n\\n/* ui buttons on sidebar */\\n.kk-toc button {outline:none;}\\n.kk-toc-btn    {outline:none;}\\n.tc-sidebar-lists  .kk-toc-btn svg { fill:  #acacac;}\\n.tc-sidebar-lists  .kk-toc-btn     { color: #acacac;}\\n\\n\\n\\n\\n/* manager buttons */\\n.kk-toc-tools-manager        { opacity:0.5; }\\n.kk-toc-tools-manager:hover  { opacity:1.0; }\"\n        },\n        \"$:/plugins/kookma/toc/templates/bookmark\": {\n            \"title\": \"$:/plugins/kookma/toc/templates/bookmark\",\n            \"created\": \"20191202151012761\",\n            \"creator\": \"EricShulman\",\n            \"modified\": \"20200227232832187\",\n            \"modifier\": \"EricShulman\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define bkm-is-bookmark() $(tidBookmarkConfig)$##$(currentTiddler)$\\n\\\\define bkm-emptystar()   &#x2606;\\n\\\\define bkm-filledstar()  &#x2605;\\n\\\\define bkm-tip-addbkm()  add '$(tiptext)$' to Bookmarks\\n\\\\define bkm-tip-rembkm()  remove '$(tiptext)$' from Bookmarks\\n\\n<!-- ADD/REMOVE ITEM FROM BOOKMARKS -->\\n<$set name=\\\"tiptext\\\" filter=\\\"[<currentTiddler>has[caption]]\\\" value={{!!caption}} emptyValue={{!!title}}>\\n<$reveal state=<<bkm-is-bookmark>> type=\\\"match\\\" text=\\\"\\\">\\n   <$button class=\\\"tc-btn-invisible\\\" tooltip=<<bkm-tip-addbkm>>>\\n      <$action-setfield $tiddler=<<tidBookmarkConfig>> $index=<<currentTiddler>> $value=<<now>>/>\\n      <span class=\\\"kk-bookmark\\\"><<bkm-emptystar>></span>\\n   </$button>\\n</$reveal>\\n<$reveal state=<<bkm-is-bookmark>> type=\\\"nomatch\\\" text=\\\"\\\">\\n   <$button class=\\\"tc-btn-invisible kk-toc-btn\\\" tooltip=<<bkm-tip-rembkm>>>\\n      <$action-setfield    $tiddler=<<tidBookmarkConfig>> $index=<<currentTiddler>>/> <!-- DELETEINDEX -->\\n      <span class=\\\"kk-bookmark.show\\\"><<bkm-filledstar>></span>\\n   </$button></$reveal>\\n</$set>\"\n        },\n        \"$:/plugins/kookma/toc/templates/more-actions\": {\n            \"title\": \"$:/plugins/kookma/toc/templates/more-actions\",\n            \"created\": \"20200221121537095\",\n            \"modified\": \"20200227232832183\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\whitespace trim\\n\\\\define config-title()\\n$:/config/ViewToolbarButtons/Visibility/$(listItem)$\\n\\\\end\\n<$button popup=<<qualify \\\"$:/state/popup/more\\\">> tooltip={{$:/language/Buttons/More/Hint}} aria-label={{$:/language/Buttons/More/Caption}} class=<<tv-config-toolbar-class>> selectedClass=\\\"tc-selected\\\">\\n<$list filter=\\\"[<tv-config-toolbar-icons>match[yes]]\\\">\\n{{$:/core/images/down-arrow}}\\n</$list>\\n<$list filter=\\\"[<tv-config-toolbar-text>match[yes]]\\\">\\n<span class=\\\"tc-btn-text\\\">\\n<$text text=\\\" \\\"/>\\n<$text text={{$:/language/Buttons/More/Caption}}/>\\n</span>\\n</$list>\\n</$button>\\n<$reveal state=<<qualify \\\"$:/state/popup/more\\\">> type=\\\"popup\\\" position=\\\"belowleft\\\" animate=\\\"yes\\\">\\n\\n<div class=\\\"tc-drop-down\\\">\\n\\n<$set name=\\\"tv-config-toolbar-icons\\\" value=\\\"yes\\\">\\n\\n<$set name=\\\"tv-config-toolbar-text\\\" value=\\\"yes\\\">\\n\\n<$set name=\\\"tv-config-toolbar-class\\\" value=\\\"tc-btn-invisible\\\">\\n\\n<$list filter=\\\"$:/core/ui/Buttons/new-here $:/core/ui/Buttons/new-journal-here $:/core/ui/Buttons/clone $:/core/ui/Buttons/open-window\\\" variable=\\\"listItem\\\">\\n\\n<$set name=\\\"tv-config-toolbar-class\\\" filter=\\\"[<tv-config-toolbar-class>] [<listItem>encodeuricomponent[]addprefix[tc-btn-]]\\\">\\n\\n<$transclude tiddler=<<listItem>> mode=\\\"inline\\\"/>\\n\\n</$set>\\n\\n</$list>\\n\\n</$set>\\n\\n</$set>\\n\\n</$set>\\n\\n</div>\\n\\n</$reveal>\"\n        },\n        \"$:/plugins/kookma/toc/templates/show-single-item\": {\n            \"title\": \"$:/plugins/kookma/toc/templates/show-single-item\",\n            \"created\": \"20200225213226563\",\n            \"modified\": \"20200313200933258\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define toc-show-menu()\\n<!-- SHOW AUTHOR TOOLS AND BOOKMARK STAR -->\\n<span class=\\\"kk-toc-tools\\\"> {{||$:/plugins/kookma/toc/templates/more-actions}} </span>\\n{{||$:/plugins/kookma/toc/templates/bookmark}}\\n\\\\end\\n\\n\\\\define show-single-item()\\n<$set name=\\\"openItemClass\\\" filter=\\\"[<tidSelectedItem>get[text]match<item>]\\\" value=\\\"tc-btn-invisible tc-tiddlylink kk-toc-opened-item\\\" emptyValue=\\\"tc-btn-invisible tc-tiddlylink\\\">\\n<!--show the toggle branch button if the item is a branch -->\\n<$list filter=\\\"[<is-branch>match[yes]]\\\" variable=ignore><<toggle-branch>></$list>\\n<$button class=<<openItemClass>> style=\\\"outline:none;\\\" to=<<item>> dragTiddler=<<item>>>\\n <$tiddler tiddler=<<item>>><<toc_caption>></$tiddler>\\n<$action-setfield $tiddler=<<tidSelectedItem>> text=<<item>> />  \\n</$button>\\n</$set>\\n\\\\end \\n\\n<$reveal default=<<toc-show-mode>> type=\\\"match\\\" text=\\\"toc-show-item-authormode\\\" >\\n<div class=\\\"kk-toc-item\\\" title=\\\"drag to rearrange items\\\">\\n <<show-single-item>>\\n <span style=\\\"float:right;margin-left:0.5em;\\\"> <<toc-show-menu>> </span>\\n <div style=\\\"clear:both;\\\"></div>\\n</div>\\n</$reveal>\\n<$reveal default=<<toc-show-mode>> type=\\\"nomatch\\\" text=\\\"toc-show-item-authormode\\\" >\\n<div class=\\\"kk-toc-item\\\" title={{!!title}}>\\n <<show-single-item>>\\n<!--1. comment to deactivate bookmarks in reader mode-->\\n <span style=\\\"float:right;margin-left:0.5em;\\\">\\n  {{||$:/plugins/kookma/toc/templates/bookmark}}\\n </span>\\n <div style=\\\"clear:both;\\\"></div>\\n<!--1. end -->\\n</div>\\n</$reveal>\\n\\n\"\n        }\n    }\n}"}